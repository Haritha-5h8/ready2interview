<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Practice Questions</title>

<style>
body {
    font-family: Arial;
    background: #f2f3f5;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}
.container {
    background: white;
    padding: 30px;
    width: 520px;
    border-radius: 10px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    text-align: center;
}
.question { font-size: 18px; margin: 20px 0; }
textarea { width: 100%; height: 80px; padding: 10px; }
button {
    margin-top: 20px;
    padding: 10px 25px;
    border: none;
    border-radius: 25px;
    background: #4b5563;
    color: white;
    font-size: 16px;
}
</style>
</head>

<body>
<div class="container">
    <h1>Practice Questions</h1>
    <div class="question" id="questionText"></div>
    <textarea id="answerBox"></textarea>
    <button id="nextBtn">Next</button>
</div>

<script>
const questions = [
  { q:"What is percentage?", keywords:["per","100"] },
  { q:"Simple interest formula?", keywords:["p","r","t"] },
  { q:"What is average?", keywords:["sum"] },
  { q:"What is ratio?", keywords:["comparison"] },
  { q:"Speed formula?", keywords:["distance","time"] },
  { q:"Profit and loss?", keywords:["selling","cost"] },
  { q:"Time and work?", keywords:["work"] },
  { q:"LCM?", keywords:["least"] },
  { q:"HCF?", keywords:["highest"] },
  { q:"Unit conversion?", keywords:["unit"] }
];

let index = 0, score = 0;
let startTime = Date.now();

const questionText = document.getElementById("questionText");
const answerBox = document.getElementById("answerBox");
const nextBtn = document.getElementById("nextBtn");

const key = "aptitude";

localStorage.removeItem("progress");   // reset old data
localStorage.removeItem("accuracy");

questionText.innerText = questions[index].q;

nextBtn.onclick = () => {
    const timeTaken = Math.floor((Date.now() - startTime) / 1000);
    saveTime(timeTaken);

    const ans = answerBox.value.toLowerCase();
    if (questions[index].keywords.some(k => ans.includes(k))) score++;

    answerBox.value = "";
    index++;

    if (index < questions.length) {
        questionText.innerText = questions[index].q;
        startTime = Date.now();
        if (index === questions.length - 1) nextBtn.innerText = "Submit";
    } else showResult();
};

function saveTime(sec){
    let p = JSON.parse(localStorage.getItem("progress")) || {};
    if(!p[key]) p[key] = { total:questions.length, times:[] };
    p[key].times.push(sec);
    localStorage.setItem("progress",JSON.stringify(p));
}

function showResult(){
    let accuracy = (score / questions.length) * 100;
    localStorage.setItem("accuracy", accuracy);

    document.querySelector(".container").innerHTML = `
      <h1>Result</h1>
      <p>Correct: ${score} / ${questions.length}</p>
      <h2>${accuracy.toFixed(0)}%</h2>
      <a href="progress.html">View Progress</a>
    `;
}
</script>
</body>
</html>   